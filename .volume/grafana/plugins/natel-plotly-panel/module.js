define(["lodash","app/plugins/sdk","moment","jquery"],(function(e,t,n,o){return a={},i.m=r=[function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanelCtrl=t.PlotlyPanelCtrl=void 0;var o=n(2),i=h(n(0)),r=h(n(3)),a=h(n(4)),s=n(5),l=n(6),c=n(7),p=n(9);function h(e){return e&&e.__esModule?e:{default:e}}var u,d,f;(n=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(g,f=o.MetricsPanelCtrl),g.$inject=["$scope","$injector","$window","$rootScope","uiSegmentSrv","annotationsSrv"],g.prototype.getCssRule=function(e){for(var t=document.styleSheets,n=0;n<t.length;n+=1)for(var o=t[n].cssRules,i=0;i<o.length;i+=1){var r=o[i];if(r.selectorText===e)return r}return null},g.prototype.onResize=function(){this.graphDiv&&this.layout&&d&&this.doResize()},g.prototype.onDataError=function(e){this.series=[],this.annotations.clear(),this.render()},g.prototype.onRefresh=function(){this.otherPanelInFullscreenMode()||this.graphDiv&&this.initialized&&d&&d.redraw(this.graphDiv)},g.prototype.onInitEditMode=function(){var e=this;this.editor=new l.EditorHelper(this),this.addEditorTab("Display","public/plugins/natel-plotly-panel/partials/tab_display.html",2),this.addEditorTab("Traces","public/plugins/natel-plotly-panel/partials/tab_traces.html",3),this.onConfigChanged(),setTimeout((function(){console.log("RESIZE in editor"),e.onResize()}),500)},g.prototype.processConfigMigration=function(){console.log("Migrating Plotly Configuration to version: "+g.configVersion);var e,t,n=this.panel.pconfig;delete n.layout.plot_bgcolor,delete n.layout.paper_bgcolor,delete n.layout.autosize,delete n.layout.height,delete n.layout.width,delete n.layout.margin,delete n.layout.scene,this.is3d()||delete n.layout.zaxis,n.settings.mode&&(e=n.settings.mode,t={markers:0<=e.indexOf("markers"),lines:0<=e.indexOf("lines")},i.default.forEach(n.traces,(function(e){e.show=t})),delete n.settings.mode),console.log("After Migration:",n),this.cfg=n,this.panel.version=g.configVersion},g.prototype.onPanelInitialized=function(){(!this.panel.version||g.configVersion>this.panel.version)&&this.processConfigMigration(),this._updateTraceData(!0)},g.prototype.getProcessedLayout=function(){var e=this.deepCopyWithTemplates(this.cfg.layout);e.plot_bgcolor="transparent",e.paper_bgcolor=e.plot_bgcolor;var t,n,o=this.graphDiv.getBoundingClientRect();return e.autosize=!1,e.height=this.height,e.width=o.width,e.xaxis||(e.xaxis={}),e.yaxis||(e.yaxis={}),this.cfg.fixScale&&("x"===this.cfg.fixScale?e.yaxis.scaleanchor="x":"y"===this.cfg.fixScale?e.xaxis.scaleanchor="y":"z"===this.cfg.fixScale&&(e.xaxis.scaleanchor="z",e.yaxis.scaleanchor="z")),this.is3d()?(e.zaxis||(e.zaxis={}),e.scene={xaxis:e.xaxis,yaxis:e.yaxis,zaxis:e.zaxis},delete e.xaxis,delete e.yaxis,delete e.zaxis,e.margin={l:0,r:0,t:0,b:5,pad:0}):(delete e.zaxis,delete e.scene,e.xaxis.type&&"auto"!==e.xaxis.type||(t=i.default.get(this.cfg,"traces[0].mapping.x"))&&0<=t.indexOf("time")&&(e.xaxis.type="date"),t="date"===e.xaxis.type,e.margin={l:e.yaxis.title?50:35,r:5,t:0,b:e.xaxis.title?65:t?40:30,pad:2},t&&!e.xaxis.range&&(n=this.timeSrv.timeRange(),e.xaxis.range=[n.from.valueOf(),n.to.valueOf()]),(n=this.getCssRule("div.flot-text"))&&(n=n.style.color,e.font||(e.font={}),e.font.color=n,n=a.default.color.parse(n).scale("a",.22).toString(),e.xaxis.gridcolor=n,e.yaxis.gridcolor=n),e.yaxis2=g.yaxis2),e},g.prototype.onRender=function(){var e,t,n=this;!this.otherPanelInFullscreenMode()&&this.graphDiv&&d&&(this.initialized?this.initialized?d.redraw(this.graphDiv).then((function(){n.renderingCompleted()})):console.log("Not initialized yet!"):(e={showLink:!1,displaylogo:!1,displayModeBar:this.cfg.settings.displayModeBar,modeBarButtonsToRemove:["sendDataToCloud"]},this.layout=this.getProcessedLayout(),this.layout.shapes=this.annotations.shapes,t=this.traces,0<this.annotations.shapes.length&&(t=this.traces.concat(this.annotations.trace)),d.react(this.graphDiv,t,this.layout,e),this.graphDiv.on("plotly_click",(function(e){if(void 0!==e&&void 0!==e.points)for(var t=0;t<e.points.length;t++){var o=e.points[t].pointNumber,i=n.traces[0].ts[o];o=e.points[t].x.toPrecision(4)+", "+e.points[t].y.toPrecision(4);n.$rootScope.appEvent("alert-success",[o,"@ "+n.dashboard.formatDate((0,r.default)(i))])}})),this.graphDiv.on("plotly_selected",(function(e){if(void 0!==e&&void 0!==e.points)if(0!==e.points.length){console.log("SELECTED",e);for(var t=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,i=0;i<e.points.length;i++){var a=e.points[i],s=a.pointNumber;s=a.fullData.x[s],t=Math.min(t,s),o=Math.max(o,s)}o+=1e3;var l={from:r.default.utc(t-=1e3),to:r.default.utc(o)};console.log("SELECTED!!!",t,o,e.points.length,l),n.timeSrv.setTime(l),n.graphDiv&&(d.Plots.purge(n.graphDiv),n.graphDiv.innerHTML="",n.initialized=!1)}else console.log("Nothing Selected",e)})),this.initialized=!0))},g.prototype.onDataSnapshotLoad=function(e){this.onDataReceived(e)},g.prototype.onDataReceived=function(e){var t,n=this,o=[],r="/";e&&0<e.length&&(t=e.length===this.panel.targets.length,e.forEach((function(e,r){var a="";if(t&&(a=(a=i.default.get(n.panel,"targets["+r+"].refId"))||String.fromCharCode("A".charCodeAt(0)+r)),e.columns){for(var l=0;l<e.columns.length;l++)o.push(new s.SeriesWrapperTable(a,e,l));o.push(new s.SeriesWrapperTableRow(a,e))}else e.target?(o.push(new s.SeriesWrapperSeries(a,e,"value")),o.push(new s.SeriesWrapperSeries(a,e,"time")),o.push(new s.SeriesWrapperSeries(a,e,"index"))):console.error("Unsupported Series response",r,e)}))),this.seriesByKey.clear(),o.forEach((function(e){e.getAllKeys().forEach((function(t){n.seriesByKey.set(t,e),r+="$"+t}))})),this.series=o,(e=this.seriesHash!==r)&&this.editor&&(l.EditorHelper.updateMappings(this),this.editor.selectTrace(this.editor.traceIndex),this.editor.onConfigChanged()),!e&&this.initialized||(this.onConfigChanged(),this.seriesHash=r),e=Promise.resolve(),!this.cfg.showAnnotations||this.is3d()?(this.annotations.clear(),this.layout&&(this.layout.shapes&&this.onConfigChanged(),this.layout.shapes=[])):e=this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}).then((function(e){e=n.annotations.update(e),n.layout&&(e!==n._hadAnno&&n.onConfigChanged(),n.layout.shapes=n.annotations.shapes),n._hadAnno=e})),e.then((function(){n._updateTraceData(),n.render()}))},g.prototype.__addCopyPath=function(e,t,n){t&&(e.__set.push({key:t,path:n}),this.seriesByKey.get(t)||this.dataWarnings.push("Unable to find: "+t+" for "+e.name+" // "+n))},g.prototype._updateTracesFromConfigs=function(){var e=this;this.dataWarnings=[],(null==this.cfg.traces||this.cfg.traces.length<1)&&(this.cfg.traces=[i.default.cloneDeep(g.defaultTrace)]);var t=this.is3d();this.traces=this.cfg.traces.map((function(n,o){var r=e.deepCopyWithTemplates(n)||{};i.default.defaults(r,g.defaults);var a=r.mapping;n={name:r.name||l.EditorHelper.createTraceName(o),type:e.cfg.settings.type,mode:"markers+lines",__set:[]},o="";return r.show.markers&&(o+="+markers",n.marker=r.settings.marker,delete n.marker.sizemin,delete n.marker.sizemode,delete n.marker.sizeref,"ramp"===r.settings.color_option?e.__addCopyPath(n,a.color,"marker.color"):(delete n.marker.colorscale,delete n.marker.showscale)),r.show.lines&&(o+="+lines",n.line=r.settings.line),e.__addCopyPath(n,a.text,"text"),e.__addCopyPath(n,a.x,"x"),e.__addCopyPath(n,a.y,"y"),t&&e.__addCopyPath(n,a.z,"z"),o&&(n.mode=o.substring(1)),n}))},g.prototype._updateTraceData=function(e){var t=this;if(!this.series)return!1;(e=void 0!==e&&e)||!this.traces?this._updateTracesFromConfigs():this.traces.length!==this.cfg.traces.length&&(console.log("trace number mismatch.  Found: "+this.traces.length+", expect: "+this.cfg.traces.length),this._updateTracesFromConfigs());var n=[];return this.traces.forEach((function(e){e.__set&&e.__set.forEach((function(o){var r=t.seriesByKey.get(o.key),a=n;r?(a=r.toArray())&&a.length>n.length&&(n=Array.from(Array(3),(function(){return 0}))):(t.error||(t.error=""),t.error+="Unable to find: "+o.key+" (using zeros).  "),i.default.set(e,o.path,a=a||n)}))})),!0},g.prototype.onConfigChanged=function(){var e=this;this._updateTraceData(!0),d&&(0,c.loadIfNecessary)(this.cfg).then((function(t){var n;t&&(d&&d.purge(e.graphDiv),d=t),e.initialized&&e.graphDiv&&(e.cfg.showAnnotations||e.annotations.clear(),n={showLink:!1,displaylogo:!1,displayModeBar:e.cfg.settings.displayModeBar,modeBarButtonsToRemove:["sendDataToCloud"]},e.layout=e.getProcessedLayout(),e.layout.shapes=e.annotations.shapes,t=e.traces,0<e.annotations.shapes.length&&(t=e.traces.concat(e.annotations.trace)),console.log("ConfigChanged (traces)",t),d.react(e.graphDiv,t,e.layout,n)),e.render()}))},g.prototype.is3d=function(){return"scatter3d"===this.cfg.settings.type},g.prototype.link=function(e,t,n,o){var i=this;this.graphDiv=t.find(".plotly-spot")[0],this.initialized=!1,t.on("mousemove",(function(e){i.mouse=e}))},g.templateUrl="partials/module.html",g.configVersion=1,g.defaultTrace={mapping:{x:null,y:null,z:null,text:null,color:null,size:null},show:{line:!0,markers:!0},settings:{line:{color:"#005f81",width:6,dash:"solid",shape:"linear"},marker:{size:15,symbol:"circle",color:"#33B5E5",colorscale:"YlOrRd",sizemode:"diameter",sizemin:3,sizeref:.2,line:{color:"#DDD",width:0},showscale:!1},color_option:"ramp"}},g.yaxis2={title:"Annotations",type:"linear",range:[0,1],visible:!1},g.defaults={pconfig:{loadFromCDN:!1,showAnnotations:!0,fixScale:"",traces:[g.defaultTrace],settings:{type:"scatter",displayModeBar:!1},layout:{showlegend:!1,legend:{orientation:"h"},dragmode:"lasso",hovermode:"closest",font:{family:'"Open Sans", Helvetica, Arial, sans-serif'},xaxis:{showgrid:!0,zeroline:!1,type:"auto",rangemode:"normal"},yaxis:{showgrid:!0,zeroline:!1,type:"linear",rangemode:"normal"},zaxis:{showgrid:!0,zeroline:!1,type:"linear",rangemode:"normal"}}}},n=g;function g(e,t,n,o,r,a){var s=f.call(this,e,t)||this;return s.$rootScope=o,s.uiSegmentSrv=r,s.annotationsSrv=a,s.annotations=new p.AnnoInfo,s.seriesByKey=new Map,s.seriesHash="?",s.doResize=i.default.debounce((function(){var e=window.getComputedStyle(s.graphDiv).display;e&&"none"!==e?(e=s.graphDiv.getBoundingClientRect(),s.layout.width=e.width,s.layout.height=s.height,d.redraw(s.graphDiv)):console.warn("resize a plot that is not drawn yet")}),50),s.deepCopyWithTemplates=function(e){if(i.default.isArray(e))return e.map((function(e){return s.deepCopyWithTemplates(e)}));if(i.default.isString(e))return s.templateSrv.replace(e,s.panel.scopedVars);if(i.default.isObject(e)){var t={};return i.default.forEach(e,(function(e,n){t[n]=s.deepCopyWithTemplates(e)})),t}return e},s._hadAnno=!1,s.initialized=!1,i.default.defaultsDeep(s.panel,g.defaults),s.cfg=s.panel.pconfig,s.traces=[],s.events&&((0,c.loadPlotly)(s.cfg).then((function(e){d=e,console.log("Plotly",e),s.events.on("render",s.onRender.bind(s)),s.events.on("data-received",s.onDataReceived.bind(s)),s.events.on("data-error",s.onDataError.bind(s)),s.events.on("panel-size-changed",s.onResize.bind(s)),s.events.on("data-snapshot-load",s.onDataSnapshotLoad.bind(s)),s.events.on("refresh",s.onRefresh.bind(s)),s.refresh()})),s.events.on("init-edit-mode",s.onInitEditMode.bind(s)),s.events.on("panel-initialized",s.onPanelInitialized.bind(s))),s}t.PlotlyPanelCtrl=n,t.PanelCtrl=n},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SeriesWrapperTable=t.SeriesWrapperTableRow=t.SeriesWrapperSeries=t.SeriesWrapper=void 0;var o,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(o=n(0))&&o.__esModule?o:{default:o},s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=(c.$inject=["refId"],c.prototype.setFirst=function(e){this.first=e,a.default.isNumber(e)?this.type="number":a.default.isString(e)?this.type="string":(void 0===e?"undefined":r(e))===r(!0)&&(this.type="boolean")},c.prototype.getKey=function(){return this.name},c.prototype.getAllKeys=function(){return[this.getKey()]},c);function c(e){this.refId=e}t.SeriesWrapper=l;var p;s(h,p=l),h.$inject=["refId","series","val"],h.prototype.toArray=function(){if("index"===this.value){for(var e=new Array(this.count),t=0;t<this.count;t++)e[t]=t;return e}var n="time"===this.value?1:0;return a.default.map(this.series.datapoints,(function(e){return e[n]}))},h.prototype.getAllKeys=function(){if(this.refId){var e=[this.name,this.refId+"@"+this.value,this.refId+"/"+this.name];return"A"===this.refId&&e.push("@"+this.value),e}return[this.name]},n=h;function h(e,t,n){var o=p.call(this,e)||this;return o.series=t,o.value=n,o.count=t.datapoints.length,o.name=t.target,"index"===n?(o.first=0,o.type="number",o.name+="@index"):"value"===n?a.default.forEach(t.datapoints,(function(e){return null===e[0]||(o.setFirst(e[0]),!1)})):"time"===n&&(o.type="epoch",o.first=t.datapoints[0][1],o.name+="@time"),o}t.SeriesWrapperSeries=n;var u;s(d,u=l),d.$inject=["refId","table"],d.prototype.toArray=function(){for(var e=this.table.rows.length,t=new Array(e),n=0;n<e;n++)t[n]=n;return t},n=d;function d(e,t){var n=u.call(this,e)||this;return n.table=t,n.name=e+"@row",n}t.SeriesWrapperTableRow=n;var f;s(g,f=l),g.$inject=["refId","table","index"],g.prototype.toArray=function(){var e=this;return a.default.map(this.table.rows,(function(t){return t[e.index]}))},g.prototype.getAllKeys=function(){return this.refId?[this.getKey(),this.refId+"/"+this.name,this.refId+"["+this.index+"]"]:[this.getKey()]},l=g;function g(e,t,n){var o=f.call(this,e)||this;if(o.table=t,o.index=n,o.count=t.rows.length,!(e=t.columns[n]))throw new Error("Unkonwn Column: "+n);if(o.name=e.text,"time"===e.type)o.type="epoch",o.first=t.rows[0][n];else for(var i=0;i<o.count;i++){var r=t.rows[i][n];if(null!==r)return o.setFirst(r),o}return o}t.SeriesWrapperTable=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorHelper=void 0;var o,i=(o=n(0))&&o.__esModule?o:{default:o},r=n(1),a="-- remove --";s.$inject=["ctrl"],s.updateMappings=function(e){if(null==e.series||e.series.length<1)return!1;var t={first:e.series[0].getKey(),time:e.series[1].getKey()},n=!1;return e.cfg.traces.forEach((function(o){i.default.defaults(o,r.PlotlyPanelCtrl.defaultTrace),(o=o.mapping).color||(o.color=t.first,n=!0),o.x||(o.x=t.time,n=!0),o.y||(o.y=t.first,n=!0),e.is3d()&&!o.z&&(o.z=t.first,n=!0)})),n},s.prototype.onConfigChanged=function(){this.onUpdateAxis();for(var e=0;e<this.axis.length;e++)"between"===this.axis[e].layout.rangemode?i.default.isArray(this.axis[e].layout.range)||(this.axis[e].layout.range=[0,null]):delete this.axis[e].layout.range;this.ctrl.onConfigChanged()},s.prototype.onUpdateAxis=function(){var e;this.trace.mapping?((e=this.ctrl.cfg.layout).xaxis||(e.xaxis={}),e.yaxis||(e.yaxis={}),this.axis=[],this.axis.push({label:"X Axis",layout:e.xaxis,property:"x",segment:this.mapping.x}),this.axis.push({label:"Y Axis",layout:e.yaxis,property:"y",segment:this.mapping.y}),this.ctrl.is3d()&&(e.zaxis||(e.zaxis={}),this.axis.push({label:"Z Axis",layout:e.zaxis,property:"z",segment:this.mapping.z}))):console.error("Missing mappings for trace",this.trace)},s.prototype.selectTrace=function(e){var t=this;this.traces=this.ctrl.cfg.traces,(!this.traces||this.traces.length<1)&&(this.traces=this.ctrl.cfg.traces=[i.default.deepClone(r.PlotlyPanelCtrl.defaultTrace)]),e>=this.ctrl.cfg.traces.length&&(e=this.ctrl.cfg.traces.length-1),this.trace=this.ctrl.cfg.traces[e],this.traceIndex=e,i.default.defaults(this.trace,r.PlotlyPanelCtrl.defaultTrace),this.trace.name||(this.trace.name=s.createTraceName(e)),this.symbol=this.ctrl.uiSegmentSrv.newSegment({value:this.trace.settings.marker.symbol}),this.mapping={},i.default.forEach(this.trace.mapping,(function(e,n){t.updateSegMapping(e,n)})),console.log("Editor Info",this),this.onConfigChanged(),this.ctrl.refresh()},s.prototype.updateSegMapping=function(e,t,n){var o,i;void 0===n&&(n=!1),a===e?(this.mapping[t]=this.ctrl.uiSegmentSrv.newSegment({value:"Select Metric",fake:!0}),e=null):e?(i={value:e,series:o=this.ctrl.seriesByKey.get(e)},o||(i.html=e+'  <i class="fa fa-exclamation-triangle"></i>'),this.mapping[t]=this.ctrl.uiSegmentSrv.newSegment(i)):this.mapping[t]=this.ctrl.uiSegmentSrv.newSegment({value:"Select Metric",fake:!0}),n&&(this.trace.mapping[t]=e,console.log("SET",t,e,this.trace.mapping))},s.prototype.createTrace=function(){var e={};(e=0<this.ctrl.cfg.traces.length?i.default.cloneDeep(this.ctrl.cfg.traces[this.ctrl.cfg.traces.length-1]):i.default.deepClone(r.PlotlyPanelCtrl.defaultTrace)).name=s.createTraceName(this.ctrl.traces.length),this.ctrl.cfg.traces.push(e),this.selectTrace(this.ctrl.cfg.traces.length-1)},s.prototype.removeCurrentTrace=function(){if(this.traces.length<=1)console.error("Wont remove a single trace",this);else{for(var e=0;e<this.traces.length;e++)if(this.trace===this.traces[e])return this.traces.splice(e,1),e>=this.traces.length&&(e=this.traces.length-1),this.ctrl.onConfigChanged(),this.ctrl._updateTraceData(!0),this.selectTrace(e),void this.ctrl.refresh();console.error("Could not find",this)}},s.createTraceName=function(e){return"Trace "+(e+1)},s.prototype.getSeriesSegs=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n,o){var i=[];e&&i.push(t.ctrl.uiSegmentSrv.newSegment({fake:!0,value:a,series:null})),t.ctrl.series.forEach((function(e){i.push(t.ctrl.uiSegmentSrv.newSegment({value:e.name,series:e}))})),n(i)}))},s.prototype.onAxisSeriesChanged=function(e){this.updateSegMapping(e.segment.value,e.property,!0),this.onConfigChanged()},s.prototype.getTextSegments=function(){return[this.mapping.text]},s.prototype.onTextMetricChanged=function(e){var t=this.mapping.text;this.updateSegMapping(t.value,"text",!0),this.onConfigChanged()},s.prototype.getColorSegments=function(){return"ramp"===this.trace.settings.color_option?[this.mapping.color]:[]},s.prototype.onColorChanged=function(){var e=this.mapping.color;this.updateSegMapping(e.value,"color",!0),this.onConfigChanged()},s.prototype.onSymbolChanged=function(){this.trace.settings.marker.symbol=this.symbol.value,this.onConfigChanged()},s.prototype.getSymbolSegs=function(){var e=this;return new Promise((function(t,n){var o=[];i.default.forEach(["circle","circle-open","circle-dot","circle-open-dot","square","square-open","square-dot","square-open-dot","diamond","diamond-open","diamond-dot","diamond-open-dot","cross","cross-open","cross-dot","cross-open-dot","x","x-open","x-dot","x-open-dot","triangle-up","triangle-up-open","triangle-up-dot","triangle-up-open-dot","triangle-down","triangle-down-open","triangle-down-dot","triangle-down-open-dot","triangle-left","triangle-left-open","triangle-left-dot","triangle-left-open-dot","triangle-right","triangle-right-open","triangle-right-dot","triangle-right-open-dot","triangle-ne","triangle-ne-open","triangle-ne-dot","triangle-ne-open-dot","triangle-se","triangle-se-open","triangle-se-dot","triangle-se-open-dot","triangle-sw","triangle-sw-open","triangle-sw-dot","triangle-sw-open-dot","triangle-nw","triangle-nw-open","triangle-nw-dot","triangle-nw-open-dot","pentagon","pentagon-open","pentagon-dot","pentagon-open-dot","hexagon","hexagon-open","hexagon-dot","hexagon-open-dot","hexagon2","hexagon2-open","hexagon2-dot","hexagon2-open-dot","octagon","octagon-open","octagon-dot","octagon-open-dot","star","star-open","star-dot","star-open-dot","hexagram","hexagram-open","hexagram-dot","hexagram-open-dot","star-triangle-up","star-triangle-up-open","star-triangle-up-dot","star-triangle-up-open-dot","star-triangle-down","star-triangle-down-open","star-triangle-down-dot","star-triangle-down-open-dot","star-square","star-square-open","star-square-dot","star-square-open-dot","star-diamond","star-diamond-open","star-diamond-dot","star-diamond-open-dot","diamond-tall","diamond-tall-open","diamond-tall-dot","diamond-tall-open-dot","diamond-wide","diamond-wide-open","diamond-wide-dot","diamond-wide-open-dot","hourglass","hourglass-open","bowtie","bowtie-open","circle-cross","circle-cross-open","circle-x","circle-x-open","square-cross","square-cross-open","square-x","square-x-open","diamond-cross","diamond-cross-open","diamond-x","diamond-x-open","cross-thin","cross-thin-open","x-thin","x-thin-open","asterisk","asterisk-open","hash","hash-open","hash-dot","hash-open-dot","y-up","y-up-open","y-down","y-down-open","y-left","y-left-open","y-right","y-right-open","line-ew","line-ew-open","line-ns","line-ns-open","line-ne","line-ne-open","line-nw","line-nw-open"],(function(t){o.push(e.ctrl.uiSegmentSrv.newSegment(t))})),t(o)}))},n=s;function s(e){this.ctrl=e,this.axis=new Array,this.traceIndex=0,this.mapping={},s.updateMappings(e),this.selectTrace(0)}t.EditorHelper=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPlotly=l,t.loadIfNecessary=function(e){return i?s===e.loadFromCDN?"scatter"===e.settings.type||a?Promise.resolve(null):(console.log("Switching to the full plotly library"),i=null,l(e)):(console.log("Use CDN",e.loadFromCDN),i=null,l(e)):l(e)};var o,i,r=(o=n(8))&&o.__esModule?o:{default:o},a=!1,s=!1;function l(e){if(i)return console.log("using already loaded value"),Promise.resolve(i);var t="scatter"!==e.settings.type,n="public/plugins/natel-plotly-panel/lib/plotly-cartesian.min.js";return e.loadFromCDN?n=t?"https://cdn.plot.ly/plotly-latest.min.js":"https://cdn.plot.ly/plotly-cartesian-latest.min.js":t&&(n="public/plugins/natel-plotly-panel/lib/plotly.min.js"),new Promise((function(e,t){(0,r.default)(n,e)})).then((function(n){return a=t,s=e.loadFromCDN,i=window.Plotly}))}},function(e,t,n){var o;
/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */o=function(){var e,t,n=document,o=n.getElementsByTagName("head")[0],i="push",r="readyState",a="onreadystatechange",s={},l={},c={},p={};function h(e,t){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return 1}function u(e,t){h(e,(function(e){return t(e),1}))}function d(t,n,o){t=t[i]?t:[t];var r=n&&n.call,a=r?n:o,g=r?t.join(""):n,y=t.length;function m(e){return e.call?e():s[e]}function v(){if(!--y)for(var e in s[g]=1,a&&a(),c)h(e.split("|"),m)&&!u(c[e],m)&&(c[e]=[])}return setTimeout((function(){u(t,(function t(n,o){return null===n?(v(),0):(o||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),p[n]?(g&&(l[g]=1),2==p[n]?v():setTimeout((function(){t(n,!0)}),0)):(p[n]=1,g&&(l[g]=1),void f(n,v)))}))}),0),d}function f(e,i){var s,l=n.createElement("script");l.onload=l.onerror=l[a]=function(){l[r]&&!/^c|loade/.test(l[r])||s||(l.onload=l[a]=null,s=1,p[e]=2,i())},l.async=1,l.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,o.insertBefore(l,o.lastChild)}return d.get=f,d.order=function(e,t,n){!function o(i){i=e.shift(),e.length?d(i,o):d(i,t,n)}()},d.path=function(t){e=t},d.urlArgs=function(e){t=e},d.ready=function(e,t,n){e=e[i]?e:[e];var o=[];return u(e,(function(e){s[e]||o[i](e)})),h(e,(function(e){return s[e]}))?t():(e=e.join("|"),c[e]=c[e]||[],c[e][i](t),n&&n(o)),d},d.done=function(e){d([null],e)},d},e.exports?e.exports=o():void 0===(o="function"==typeof(o=o)?o.call(t,n,t,e):o)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=(r.prototype.clear=function(){this.shapes=[],this.trace={mode:"markers",type:"scatter",hoverinfo:"x+text",x:[],y:[],text:[],yaxis:"y2",marker:{size:15,symbol:"triangle-up",color:[]}}},r.prototype.update=function(e){if(!e||!e.annotations)return this.clear(),!1;var t=[],n=[],i=[],r=[];return this.shapes=e.annotations.map((function(e){return t.push(e.time),n.push(0),i.push(e.text),r.push(e.annotation.iconColor),{type:"line",xref:"x",yref:"paper",x0:e.time,y0:0,x1:e.time,y1:1,visible:!0,layer:"above",fillcolor:e.annotation.iconColor,opacity:.8,line:{color:e.annotation.iconColor,width:1,dash:"dash"}}})),this.trace=o(o({},this.trace),{x:t,y:n,text:i}),this.trace.marker.color=r,0<t.length},r);function r(){this.clear()}t.AnnoInfo=i}],i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1);function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r,a}));
//# sourceMappingURL=module.js.map